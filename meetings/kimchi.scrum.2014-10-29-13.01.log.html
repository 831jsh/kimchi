<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<title>#kimchi log</title>
<style type="text/css">
/* For the .log.html */
pre { /*line-height: 125%;*/
      white-space: pre-wrap; }
body { background: #f0f0f0; }

body .tm  { color: #007020 }                      /* time */
body .nk  { color: #062873; font-weight: bold }   /* nick, regular */
body .nka { color: #007020; font-weight: bold }  /* action nick */
body .ac  { color: #00A000 }                      /* action line */
body .hi  { color: #4070a0 }                 /* hilights */
/* Things to make particular MeetBot commands stick out */
body .topic     { color: #007020; font-weight: bold }
body .topicline { color: #000080; font-weight: bold }
body .cmd       { color: #007020; font-weight: bold }
body .cmdline  { font-weight: bold }

</style>
</head>

<body>
<pre><a name="l-1"></a><span class="tm">13:01:39</span><span class="nk"> &lt;alinefm&gt;</span> <span class="cmd">#startmeeting</span><span class="cmdline"></span>
<a name="l-2"></a><span class="tm">13:01:39</span><span class="nk"> &lt;kimchi-bot&gt;</span> Meeting started Wed Oct 29 13:01:39 2014 UTC.  The chair is alinefm. Information about MeetBot at http://wiki.debian.org/MeetBot.
<a name="l-3"></a><span class="tm">13:01:39</span><span class="nk"> &lt;kimchi-bot&gt;</span> Useful Commands: #action #agreed #help #info #idea #link #topic.
<a name="l-4"></a><span class="tm">13:01:39</span><span class="nk"> &lt;alinefm&gt;</span> <span class="cmd">#meetingname </span><span class="cmdline">scrum</span>
<a name="l-5"></a><span class="tm">13:01:39</span><span class="nk"> &lt;kimchi-bot&gt;</span> The meeting name has been set to 'scrum'
<a name="l-6"></a><span class="tm">13:01:49</span><span class="nk"> &lt;alinefm&gt;</span> <span class="cmd">#info </span><span class="cmdline">Agenda 1) Status 2) Open discussion</span>
<a name="l-7"></a><span class="tm">13:01:50</span><span class="nk"> &lt;alinefm&gt;</span> anything else?
<a name="l-8"></a><span class="tm">13:02:47</span><span class="nk"> &lt;alinefm&gt;</span> apparently not
<a name="l-9"></a><span class="tm">13:02:51</span><span class="nk"> &lt;alinefm&gt;</span> so let's get started
<a name="l-10"></a><span class="tm">13:03:00</span><span class="nk"> &lt;alinefm&gt;</span> <span class="topic">#topic </span><span class="topicline">Status</span>
<a name="l-11"></a><span class="tm">13:03:01</span><span class="nk"> &lt;alinefm&gt;</span> <span class="cmd">#info </span><span class="cmdline">Please provide your status using the #info command: #info &lt;nickname&gt; &lt;status&gt;</span>
<a name="l-12"></a><span class="tm">13:03:12</span><span class="nk"> &lt;wenwang&gt;</span> <span class="cmd">#info </span><span class="cmdline">wenwang sent patch V3 Guest disk hot plug UI</span>
<a name="l-13"></a><span class="tm">13:03:20</span><span class="nk"> &lt;YuXin&gt;</span> <span class="cmd">#info </span><span class="cmdline">YuXin Guest Clone UI patch v2</span>
<a name="l-14"></a><span class="tm">13:03:22</span><span class="nk"> &lt;alinefm&gt;</span> <span class="cmd">#info </span><span class="cmdline">alinefm sent patch to use lxml.etree on libvirtstoragepool.py</span>
<a name="l-15"></a><span class="tm">13:03:23</span><span class="nk"> &lt;royce&gt;</span> <span class="cmd">#info </span><span class="cmdline">royce finished authentication and authorization of LDAP at backend v2</span>
<a name="l-16"></a><span class="tm">13:03:24</span><span class="nk"> &lt;danielhb&gt;</span> <span class="cmd">#info </span><span class="cmdline">danielhb reviewed a handful of patches in the ML</span>
<a name="l-17"></a><span class="tm">13:03:48</span><span class="nk"> &lt;YuXin&gt;</span> <span class="cmd">#info </span><span class="cmdline">YuXin Investigate browser base terminal to access guest serial console</span>
<a name="l-18"></a><span class="tm">13:04:01</span><span class="nk"> &lt;wenwang&gt;</span> <span class="cmd">#info </span><span class="cmdline">wenwang sent patch V3 improve PCI tab in guest edit</span>
<a name="l-19"></a><span class="tm">13:04:06</span><span class="nk"> &lt;alinefm&gt;</span> <span class="cmd">#info </span><span class="cmdline">alinefm sent patch to create a common xmlutils/disk.py module to hold all the guest disk XML manipulation and also use the same functions on vmstorages.py and vmtemplate.py</span>
<a name="l-20"></a><span class="tm">13:04:07</span><span class="nk"> &lt;YuXin&gt;</span> <span class="cmd">#info </span><span class="cmdline">YuXin review patches</span>
<a name="l-21"></a><span class="tm">13:04:14</span><span class="nk"> &lt;royce&gt;</span> <span class="cmd">#info </span><span class="cmdline">royce is working on UI ldap, discussed with YuXin, will send out a mock tomorrow</span>
<a name="l-22"></a><span class="tm">13:04:34</span><span class="nk"> &lt;vianac&gt;</span> <span class="cmd">#info </span><span class="cmdline">vianac worked on the clone feature; reviewed patches on the mailing list</span>
<a name="l-23"></a><span class="tm">13:04:42</span><span class="nk"> &lt;christyp&gt;</span> <span class="cmd">#info </span><span class="cmdline">christyp sent v8 of templates backend fpr cpu_info</span>
<a name="l-24"></a><span class="tm">13:04:42</span><span class="nk"> &lt;alinefm&gt;</span> <span class="cmd">#info </span><span class="cmdline">alinefm sent patch to use lxml.etree to create the &lt;qemu:commandline&gt; XML</span>
<a name="l-25"></a><span class="tm">13:04:49</span><span class="nk"> &lt;wenwang&gt;</span> <span class="cmd">#info </span><span class="cmdline">wenwang working on refining template edit and will be finished by the end of this week</span>
<a name="l-26"></a><span class="tm">13:06:09</span><span class="nk"> &lt;christyp&gt;</span> <span class="cmd">#info </span><span class="cmdline">christyp worked on the logic for SMT/HT and will test this week</span>
<a name="l-27"></a><span class="tm">13:07:20</span><span class="nk"> &lt;alinefm&gt;</span> royce, do you mind if I send a patch to fix https://github.com/kimchi-project/kimchi/issues/466 ? it is blocking christyp
<a name="l-28"></a><span class="tm">13:08:08</span><span class="nk"> &lt;royce&gt;</span> alinefm, I haven't noticed your reply, sorry
<a name="l-29"></a><span class="tm">13:08:24</span><span class="nk"> &lt;alinefm&gt;</span> np at all - I know you are busy with LDAP support
<a name="l-30"></a><span class="tm">13:08:29</span><span class="nk"> &lt;royce&gt;</span> my ml doesn't inform me...I will send out a patch tomorrow
<a name="l-31"></a><span class="tm">13:08:54</span><span class="nk"> &lt;alinefm&gt;</span> ok
<a name="l-32"></a><span class="tm">13:08:54</span><span class="nk"> &lt;royce&gt;</span> often I got informed by mail of these issues...
<a name="l-33"></a><span class="tm">13:08:54</span><span class="nk"> &lt;christyp&gt;</span> thanks royce and alinefm. i had almost forgott about that
<a name="l-34"></a><span class="tm">13:09:04</span><span class="nk"> &lt;christyp&gt;</span> *forgotten
<a name="l-35"></a><span class="tm">13:09:10</span><span class="nk"> &lt;alinefm&gt;</span> royce, have you started some tests about the CDROM with SCSI? do you need help on it?
<a name="l-36"></a><span class="tm">13:09:40</span><span class="nk"> &lt;royce&gt;</span> alinefm, tested, I will send that one this week too
<a name="l-37"></a><span class="tm">13:10:12</span><span class="nk"> &lt;alinefm&gt;</span> royce, did it work in all supported distros??
<a name="l-38"></a><span class="tm">13:10:13</span><span class="nk"> &lt;royce&gt;</span> I had a newly installed fedora yesterday, rhel haven't
<a name="l-39"></a><span class="tm">13:10:26</span><span class="nk"> &lt;royce&gt;</span> except rhel, haven't checked
<a name="l-40"></a><span class="tm">13:10:46</span><span class="nk"> &lt;alinefm&gt;</span> royce, I can check RHEL for you - I have some VMs running
<a name="l-41"></a><span class="tm">13:10:52</span><span class="nk"> &lt;alinefm&gt;</span> and send you a note
<a name="l-42"></a><span class="tm">13:11:17</span><span class="nk"> &lt;alinefm&gt;</span> ok... any more update or can we move on to open discussion?
<a name="l-43"></a><span class="tm">13:11:24</span><span class="nk"> &lt;royce&gt;</span> OK, thanks, I will send out that one later, the tests are out of date
<a name="l-44"></a><span class="tm">13:11:42</span><span class="nk"> &lt;alinefm&gt;</span> ok
<a name="l-45"></a><span class="tm">13:12:05</span><span class="nk"> &lt;alinefm&gt;</span> <span class="topic">#topic </span><span class="topicline">Open Discussion</span>
<a name="l-46"></a><span class="tm">13:12:19</span><span class="nk"> &lt;alinefm&gt;</span> so.. what will we talk about?
<a name="l-47"></a><span class="tm">13:12:25</span><span class="nk"> &lt;YuXin&gt;</span> for browser based terminal to access guest serial console, I identified a jquery plugin named jquery terminal
<a name="l-48"></a><span class="tm">13:12:59</span><span class="nk"> &lt;YuXin&gt;</span> it can handle the command input and interaction with user with the output
<a name="l-49"></a><span class="tm">13:13:25</span><span class="nk"> &lt;YuXin&gt;</span> I will create a html to wrap it
<a name="l-50"></a><span class="tm">13:13:26</span><span class="nk"> &lt;alinefm&gt;</span> great - have you setup it and test?
<a name="l-51"></a><span class="tm">13:13:41</span><span class="nk"> &lt;YuXin&gt;</span> there is a demo quite straight-forward
<a name="l-52"></a><span class="tm">13:13:47</span><span class="nk"> &lt;alinefm&gt;</span> what is the license? is there a package for it or do we need to import its code?
<a name="l-53"></a><span class="tm">13:14:01</span><span class="nk"> &lt;YuXin&gt;</span> LGPL
<a name="l-54"></a><span class="tm">13:14:17</span><span class="nk"> &lt;YuXin&gt;</span> I sent out a mail about it, it is a repository on github
<a name="l-55"></a><span class="tm">13:14:40</span><span class="nk"> &lt;YuXin&gt;</span> in html, open a websocket connection to kimchi server side
<a name="l-56"></a><span class="tm">13:15:02</span><span class="nk"> &lt;YuXin&gt;</span> then just get user input(command) and send to web sockdet
<a name="l-57"></a><span class="tm">13:15:20</span><span class="nk"> &lt;alinefm&gt;</span> YuXin, sorry, I haven't checked all the mails on ML this week yet
<a name="l-58"></a><span class="tm">13:15:20</span><span class="nk"> &lt;alinefm&gt;</span> I will do that today
<a name="l-59"></a><span class="tm">13:15:30</span><span class="nk"> &lt;YuXin&gt;</span> and receieve response web socket and pass to jquery terminal plugin to display the result
<a name="l-60"></a><span class="tm">13:15:43</span><span class="nk"> &lt;YuXin&gt;</span> one thing I want to discuss is the authentication
<a name="l-61"></a><span class="tm">13:15:52</span><span class="nk"> &lt;YuXin&gt;</span> the guest serial console will need login
<a name="l-62"></a><span class="tm">13:16:02</span><span class="nk"> &lt;YuXin&gt;</span> then a session need to be maintained
<a name="l-63"></a><span class="tm">13:16:32</span><span class="nk"> &lt;YuXin&gt;</span> as vnc also use web socket and has a session
<a name="l-64"></a><span class="tm">13:16:42</span><span class="nk"> &lt;YuXin&gt;</span> can we copy the same way to maintain session?
<a name="l-65"></a><span class="tm">13:16:47</span><span class="nk"> &lt;alinefm&gt;</span> 1) did you check how we connect websockets with serial console?
<a name="l-66"></a><span class="tm">13:16:56</span><span class="nk"> &lt;YuXin&gt;</span> no
<a name="l-67"></a><span class="tm">13:16:59</span><span class="nk"> &lt;alinefm&gt;</span> 2) for authentication, we can protect the XML you will create
<a name="l-68"></a><span class="tm">13:17:09</span><span class="nk"> &lt;alinefm&gt;</span> in a similar way we do for novnc and spice
<a name="l-69"></a><span class="tm">13:17:19</span><span class="nk"> &lt;alinefm&gt;</span> s/XML/HTML
<a name="l-70"></a><span class="tm">13:17:49</span><span class="nk"> &lt;YuXin&gt;</span> I mean after login, user input a command in browser terminal, then the command is sent to server
<a name="l-71"></a><span class="tm">13:18:15</span><span class="nk"> &lt;YuXin&gt;</span> server(guest serial console) need to know that the user is already authenticated
<a name="l-72"></a><span class="tm">13:18:23</span><span class="nk"> &lt;YuXin&gt;</span> and run the command
<a name="l-73"></a><span class="tm">13:19:04</span><span class="nk"> &lt;alinefm&gt;</span> if the user gets the console (ie, Kimchi open the text console on browser) he is already authenticated on Kimchi
<a name="l-74"></a><span class="tm">13:19:18</span><span class="nk"> &lt;YuXin&gt;</span> yes
<a name="l-75"></a><span class="tm">13:19:45</span><span class="nk"> &lt;YuXin&gt;</span> then serial console will need to authenticate again in guest space, right?
<a name="l-76"></a><span class="tm">13:21:34</span><span class="nk"> &lt;alinefm&gt;</span> it depends on guest configuration
<a name="l-77"></a><span class="tm">13:22:03</span><span class="nk"> &lt;alinefm&gt;</span> I mean, you can set to ask the user to login in the console or not
<a name="l-78"></a><span class="tm">13:22:25</span><span class="nk"> &lt;alinefm&gt;</span> there is a way to configure it to auto-login
<a name="l-79"></a><span class="tm">13:22:33</span><span class="nk"> &lt;alinefm&gt;</span> but it depends on how user configured it
<a name="l-80"></a><span class="tm">13:23:35</span><span class="nk"> &lt;YuXin&gt;</span> for example, if I use ssh to access a linux server remoted, I need to authenticate  first, then all the following command does not need to authenticate again, so there is a session maintained someway
<a name="l-81"></a><span class="tm">13:24:01</span><span class="nk"> &lt;YuXin&gt;</span> for serial console, between guest and brower terminal, such a session also need to be maintained, right?
<a name="l-82"></a><span class="tm">13:24:32</span><span class="nk"> &lt;alinefm&gt;</span> yes - but it is done by bash
<a name="l-83"></a><span class="tm">13:24:53</span><span class="nk"> &lt;alinefm&gt;</span> the browser terminal is only a interface to user enters commands
<a name="l-84"></a><span class="tm">13:25:05</span><span class="nk"> &lt;alinefm&gt;</span> we get and redirect it to the real console
<a name="l-85"></a><span class="tm">13:25:19</span><span class="nk"> &lt;YuXin&gt;</span> so you mean the session will be maintained at server side?
<a name="l-86"></a><span class="tm">13:25:23</span><span class="nk"> &lt;alinefm&gt;</span> yes
<a name="l-87"></a><span class="tm">13:25:26</span><span class="nk"> &lt;YuXin&gt;</span> ok
<a name="l-88"></a><span class="tm">13:25:58</span><span class="nk"> &lt;alinefm&gt;</span> YuXin, we need to check how connect the serial console to the websockets
<a name="l-89"></a><span class="tm">13:26:32</span><span class="nk"> &lt;YuXin&gt;</span> websocket is controled by kimchi code and serial console should have a interface to access it, right?
<a name="l-90"></a><span class="tm">13:26:52</span><span class="nk"> &lt;alinefm&gt;</span> from the last email I saw on ML from Zheng Zhou, his proposal would not work with guests created outside Kimchi - which is not feasible for us
<a name="l-91"></a><span class="tm">13:27:09</span><span class="nk"> &lt;alinefm&gt;</span> yes
<a name="l-92"></a><span class="tm">13:27:36</span><span class="nk"> &lt;YuXin&gt;</span> so to me, just some python code to link web socket and guest serial console
<a name="l-93"></a><span class="tm">13:28:08</span><span class="nk"> &lt;alinefm&gt;</span> in fact is is that, the problem is "how"
<a name="l-94"></a><span class="tm">13:28:29</span><span class="nk"> &lt;alinefm&gt;</span> I will try to investigate it soon
<a name="l-95"></a><span class="tm">13:28:53</span><span class="nk"> &lt;alinefm&gt;</span> YuXin, you can also talk to Zheng Zhou to see if he has a new solution
<a name="l-96"></a><span class="tm">13:29:07</span><span class="nk"> &lt;YuXin&gt;</span> ok, virsh console can be a sample
<a name="l-97"></a><span class="tm">13:30:13</span><span class="nk"> &lt;alinefm&gt;</span> YuXin, do you want to talk about the confirmation dialog on clone UI?
<a name="l-98"></a><span class="tm">13:30:44</span><span class="nk"> &lt;YuXin&gt;</span> aline, are you worrying about how to get command from websocket and pass to guest serial console
<a name="l-99"></a><span class="tm">13:31:06</span><span class="nk"> &lt;alinefm&gt;</span> YuXin, yes
<a name="l-100"></a><span class="tm">13:31:21</span><span class="nk"> &lt;alinefm&gt;</span> it is related to the connection between websockets and serial console
<a name="l-101"></a><span class="tm">13:31:40</span><span class="nk"> &lt;YuXin&gt;</span> so currently, kimchi has no server side code to minitor the websocket?
<a name="l-102"></a><span class="tm">13:32:20</span><span class="nk"> &lt;alinefm&gt;</span> kimchi starts a second process that launch websockify (which it is the server)
<a name="l-103"></a><span class="tm">13:32:41</span><span class="nk"> &lt;alinefm&gt;</span> then we just configure the websockify
<a name="l-104"></a><span class="tm">13:32:56</span><span class="nk"> &lt;YuXin&gt;</span> ok, for websocket on a port, the connection will sustain until client or server explicitly close it
<a name="l-105"></a><span class="tm">13:33:15</span><span class="nk"> &lt;alinefm&gt;</span> for example, we use a dir to hold all the tokens - when you ask for  the guest console we add the token and port to a file in this dir
<a name="l-106"></a><span class="tm">13:33:19</span><span class="nk"> &lt;alinefm&gt;</span> and websockify uses it
<a name="l-107"></a><span class="tm">13:33:51</span><span class="nk"> &lt;YuXin&gt;</span> the once the websocket at server side accept a connection, the connection between brower and websocket will be kept
<a name="l-108"></a><span class="tm">13:33:58</span><span class="nk"> &lt;alinefm&gt;</span> yes
<a name="l-109"></a><span class="tm">13:34:08</span><span class="nk"> &lt;alinefm&gt;</span> until the user close the browser console
<a name="l-110"></a><span class="tm">13:34:33</span><span class="nk"> &lt;YuXin&gt;</span> when websocket server side accept the connetion, some parameter will be passed along to identify the guest
<a name="l-111"></a><span class="tm">13:34:35</span><span class="nk"> &lt;alinefm&gt;</span> or the vm is powered off
<a name="l-112"></a><span class="tm">13:35:03</span><span class="nk"> &lt;YuXin&gt;</span> then the websocket can connect guest serial console
<a name="l-113"></a><span class="tm">13:35:17</span><span class="nk"> &lt;YuXin&gt;</span> and this connection should also be kept
<a name="l-114"></a><span class="tm">13:35:54</span><span class="nk"> &lt;YuXin&gt;</span> for each connection, a new thread can started
<a name="l-115"></a><span class="tm">13:36:03</span><span class="nk"> &lt;YuXin&gt;</span> a new thread can be started
<a name="l-116"></a><span class="tm">13:36:37</span><span class="nk"> &lt;YuXin&gt;</span> it is identical to java socket programming I believe
<a name="l-117"></a><span class="tm">13:37:13</span><span class="nk"> &lt;YuXin&gt;</span> for server side design, let me get you a sample
<a name="l-118"></a><span class="tm">13:37:56</span><span class="nk"> &lt;alinefm&gt;</span> ok
<a name="l-119"></a><span class="tm">13:38:25</span><span class="nk"> &lt;YuXin&gt;</span> http://docs.oracle.com/javaee/7/tutorial/doc/websocket.htm
<a name="l-120"></a><span class="tm">13:39:23</span><span class="nk"> &lt;YuXin&gt;</span> j2ee standard already support websocket in JSR 356, there is a model about how j2ee server handle websocket connection
<a name="l-121"></a><span class="tm">13:40:06</span><span class="nk"> &lt;YuXin&gt;</span> basically, it has a component technology called endpoint at server side
<a name="l-122"></a><span class="tm">13:40:16</span><span class="nk"> &lt;YuXin&gt;</span> each endpoint is identified with a uri
<a name="l-123"></a><span class="tm">13:40:44</span><span class="nk"> &lt;YuXin&gt;</span> browser side connect to the endpoint with the uri through the websocket
<a name="l-124"></a><span class="tm">13:41:28</span><span class="nk"> &lt;YuXin&gt;</span> once the connection is establised. that endpoint will peer to a brower and their conversation can start
<a name="l-125"></a><span class="tm">13:41:30</span><span class="nk"> &lt;alinefm&gt;</span> yes - I will do some tests on it
<a name="l-126"></a><span class="tm">13:42:21</span><span class="nk"> &lt;YuXin&gt;</span> for serial  console, in endpoint, it should connect to the guest serial console and maintain that connection in the endpoint
<a name="l-127"></a><span class="tm">13:42:41</span><span class="nk"> &lt;YuXin&gt;</span> then the 2 connections will be kept for user commands
<a name="l-128"></a><span class="tm">13:44:01</span><span class="nk"> &lt;alinefm&gt;</span> yeap - it is how we did for novnc and spice
<a name="l-129"></a><span class="tm">13:44:12</span><span class="nk"> &lt;YuXin&gt;</span> and you said, in endpoint, there should be a client to connect to guest serial console, the console session will be maintained there
<a name="l-130"></a><span class="tm">13:44:25</span><span class="nk"> &lt;alinefm&gt;</span> I think before we do real tests on it, it is difficult to know how it will work for us
<a name="l-131"></a><span class="tm">13:44:31</span><span class="nk"> &lt;alinefm&gt;</span> yeap
<a name="l-132"></a><span class="tm">13:44:46</span><span class="nk"> &lt;YuXin&gt;</span> ok, let us move to guest clone UI
<a name="l-133"></a><span class="tm">13:45:06</span><span class="nk"> &lt;YuXin&gt;</span> anything more about serial console, right now?
<a name="l-134"></a><span class="tm">13:45:17</span><span class="nk"> &lt;alinefm&gt;</span> I'd like to know, if you need a new API to do the pre-check or if it is possible on UI
<a name="l-135"></a><span class="tm">13:45:18</span><span class="nk"> &lt;alinefm&gt;</span> ?
<a name="l-136"></a><span class="tm">13:45:46</span><span class="nk"> &lt;alinefm&gt;</span> YuXin, no - we can move on. I will do some tests on websockify and serial console and share on ML what I find
<a name="l-137"></a><span class="tm">13:45:56</span><span class="nk"> &lt;YuXin&gt;</span> ok
<a name="l-138"></a><span class="tm">13:46:20</span><span class="nk"> &lt;YuXin&gt;</span> for guest clone UI precheck, I do not think we need new API
<a name="l-139"></a><span class="tm">13:46:56</span><span class="nk"> &lt;YuXin&gt;</span> for iscsi and scsi fc, at client side we can get it
<a name="l-140"></a><span class="tm">13:47:15</span><span class="nk"> &lt;YuXin&gt;</span> we can alert that message
<a name="l-141"></a><span class="tm">13:47:53</span><span class="nk"> &lt;alinefm&gt;</span> right - and for the pool capacity, can you check the free space on pool and compare to the disk size?
<a name="l-142"></a><span class="tm">13:48:36</span><span class="nk"> &lt;YuXin&gt;</span> all are available at client side?
<a name="l-143"></a><span class="tm">13:49:38</span><span class="nk"> &lt;YuXin&gt;</span> so we have size of all virtual disks of a guest and we have its pool size
<a name="l-144"></a><span class="tm">13:49:57</span><span class="nk"> &lt;alinefm&gt;</span> hmm... thinking...
<a name="l-145"></a><span class="tm">13:50:14</span><span class="nk"> &lt;YuXin&gt;</span> can we get the the virtual disk belong to which pool?
<a name="l-146"></a><span class="tm">13:50:44</span><span class="nk"> &lt;alinefm&gt;</span> http://fpaste.org/146148/45906381/
<a name="l-147"></a><span class="tm">13:50:53</span><span class="nk"> &lt;alinefm&gt;</span> no - we don't have the disk size and its pool
<a name="l-148"></a><span class="tm">13:50:56</span><span class="nk"> &lt;alinefm&gt;</span> only the path
<a name="l-149"></a><span class="tm">13:52:56</span><span class="nk"> &lt;YuXin&gt;</span> so some attribute are missing in this uri, right?
<a name="l-150"></a><span class="tm">13:53:43</span><span class="nk"> &lt;YuXin&gt;</span> anyway, I think we just need to enhance some API, right?
<a name="l-151"></a><span class="tm">13:53:56</span><span class="nk"> &lt;alinefm&gt;</span> yes
<a name="l-152"></a><span class="tm">13:54:09</span><span class="nk"> &lt;alinefm&gt;</span> we can add pool and size to GET /vms/&lt;name&gt;/storages
<a name="l-153"></a><span class="tm">13:54:56</span><span class="nk"> &lt;alinefm&gt;</span> but I am thinking if it wouldn't be faster with we did a new API to check all the cases
<a name="l-154"></a><span class="tm">13:55:16</span><span class="nk"> &lt;alinefm&gt;</span> for example: POST /vms/&lt;name&gt;/clone {mode: 'dry-run'}
<a name="l-155"></a><span class="tm">13:56:14</span><span class="nk"> &lt;alinefm&gt;</span> YuXin, what do you think?
<a name="l-156"></a><span class="tm">13:56:21</span><span class="nk"> &lt;alinefm&gt;</span> vianac, royce ^
<a name="l-157"></a><span class="tm">13:56:41</span><span class="nk"> &lt;alinefm&gt;</span> or just change the /vms/&lt;name&gt;/storages to add pool and size?
<a name="l-158"></a><span class="tm">13:57:28</span><span class="nk"> &lt;YuXin&gt;</span> I think enhance API is more strategic
<a name="l-159"></a><span class="tm">13:57:59</span><span class="nk"> &lt;royce&gt;</span> I agree with the latter
<a name="l-160"></a><span class="tm">13:58:58</span><span class="nk"> &lt;alinefm&gt;</span> vianac, /
<a name="l-161"></a><span class="tm">13:58:59</span><span class="nk"> &lt;alinefm&gt;</span> ?
<a name="l-162"></a><span class="tm">13:59:09</span><span class="nk"> &lt;YuXin&gt;</span> aline, if you worry about the time, for short-term, add a precheck API is also ok
<a name="l-163"></a><span class="tm">13:59:44</span><span class="nk"> &lt;YuXin&gt;</span> but scsi and iscsi check does not need to be in that precheck API, right?
<a name="l-164"></a><span class="tm">13:59:49</span><span class="nk"> &lt;vianac&gt;</span> both approaches look fine to me, but I'd choose changing the storages API
<a name="l-165"></a><span class="tm">14:00:56</span><span class="nk"> &lt;alinefm&gt;</span> ok - I will do those changes on storages API and so we do the pre-check on UI
<a name="l-166"></a><span class="tm">14:01:03</span><span class="nk"> &lt;YuXin&gt;</span> ok
<a name="l-167"></a><span class="tm">14:01:17</span><span class="nk"> &lt;YuXin&gt;</span> thanks, I have nothing more
<a name="l-168"></a><span class="tm">14:01:39</span><span class="nk"> &lt;alinefm&gt;</span> YuXin, please, how a dialog with "Verifying guest disks..." while doing the pre-check and then hide it and show the confirmation dialog if needed
<a name="l-169"></a><span class="tm">14:01:45</span><span class="nk"> &lt;alinefm&gt;</span> agree ^?
<a name="l-170"></a><span class="tm">14:01:50</span><span class="nk"> &lt;alinefm&gt;</span> other suggestions?
<a name="l-171"></a><span class="tm">14:03:11</span><span class="nk"> &lt;YuXin&gt;</span> how about add this message to that being cloned guest
<a name="l-172"></a><span class="tm">14:04:35</span><span class="nk"> &lt;alinefm&gt;</span> hm... it will not let user think the clone already began?
<a name="l-173"></a><span class="tm">14:05:29</span><span class="nk"> &lt;YuXin&gt;</span> before showing that 'cloning guest...', we show 'verifying guest disks....'
<a name="l-174"></a><span class="tm">14:06:15</span><span class="nk"> &lt;YuXin&gt;</span> if failed, then popup a dialog to ask user to confirm
<a name="l-175"></a><span class="tm">14:06:37</span><span class="nk"> &lt;YuXin&gt;</span> if succeed, replace that message with 'cloning guest...'
<a name="l-176"></a><span class="tm">14:06:41</span><span class="nk"> &lt;alinefm&gt;</span> and if you switch tabs while the pre-check?
<a name="l-177"></a><span class="tm">14:07:26</span><span class="nk"> &lt;alinefm&gt;</span> how will you know if pre-check ends/fails or succeed?
<a name="l-178"></a><span class="tm">14:08:15</span><span class="nk"> &lt;YuXin&gt;</span> fail, popup a dialog to tell user that pool run out of capacity, will be cloned to default pool, continue?
<a name="l-179"></a><span class="tm">14:08:40</span><span class="nk"> &lt;YuXin&gt;</span> succeed, just let the clone progress
<a name="l-180"></a><span class="tm">14:09:07</span><span class="nk"> &lt;alinefm&gt;</span> 1) I select "Clone" and a new entry will be shown "Verifying disks..."
<a name="l-181"></a><span class="tm">14:09:16</span><span class="nk"> &lt;alinefm&gt;</span> 2) I switch to Templates tab
<a name="l-182"></a><span class="tm">14:09:23</span><span class="nk"> &lt;alinefm&gt;</span> 3) I come back to Guests tab
<a name="l-183"></a><span class="tm">14:09:35</span><span class="nk"> &lt;alinefm&gt;</span> the Guests tab will be built again from scratch
<a name="l-184"></a><span class="tm">14:09:49</span><span class="nk"> &lt;YuXin&gt;</span> for 1), no new entry will be created, just let the original clone continue
<a name="l-185"></a><span class="tm">14:10:37</span><span class="nk"> &lt;alinefm&gt;</span> the new entry will be created only after the pre-check?
<a name="l-186"></a><span class="tm">14:11:10</span><span class="nk"> &lt;YuXin&gt;</span> for 2) when click on clone, he will not switch to other tab at once, that request will be fast and calculation will be fast, I do  not think this will truly happen
<a name="l-187"></a><span class="tm">14:11:29</span><span class="nk"> &lt;alinefm&gt;</span> hm.. ok
<a name="l-188"></a><span class="tm">14:11:43</span><span class="nk"> &lt;alinefm&gt;</span> got it
<a name="l-189"></a><span class="tm">14:11:44</span><span class="nk"> &lt;alinefm&gt;</span> thanks!
<a name="l-190"></a><span class="tm">14:11:47</span><span class="nk"> &lt;YuXin&gt;</span> yes, precheck will be quite fast
<a name="l-191"></a><span class="tm">14:11:48</span><span class="nk"> &lt;YuXin&gt;</span> ok
<a name="l-192"></a><span class="tm">14:12:01</span><span class="nk"> &lt;alinefm&gt;</span> anything else for today?
<a name="l-193"></a><span class="tm">14:12:16</span><span class="nk"> &lt;YuXin&gt;</span> I have nothing else
<a name="l-194"></a><span class="tm">14:12:33</span><span class="nk"> &lt;alinefm&gt;</span> thanks everyone for joining!!
<a name="l-195"></a><span class="tm">14:12:38</span><span class="nk"> &lt;alinefm&gt;</span> <span class="cmd">#endmeeting</span><span class="cmdline"></span></pre>
</body></html>
