<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<title>#kimchi log</title>
<style type="text/css">
/* For the .log.html */
pre { /*line-height: 125%;*/
      white-space: pre-wrap; }
body { background: #f0f0f0; }

body .tm  { color: #007020 }                      /* time */
body .nk  { color: #062873; font-weight: bold }   /* nick, regular */
body .nka { color: #007020; font-weight: bold }  /* action nick */
body .ac  { color: #00A000 }                      /* action line */
body .hi  { color: #4070a0 }                 /* hilights */
/* Things to make particular MeetBot commands stick out */
body .topic     { color: #007020; font-weight: bold }
body .topicline { color: #000080; font-weight: bold }
body .cmd       { color: #007020; font-weight: bold }
body .cmdline  { font-weight: bold }

</style>
</head>

<body>
<pre><a name="l-1"></a><span class="tm">13:04:07</span><span class="nk"> &lt;alinefm&gt;</span> <span class="cmd">#startmeeting</span><span class="cmdline"></span>
<a name="l-2"></a><span class="tm">13:04:07</span><span class="nk"> &lt;alinefm&gt;</span> <span class="cmd">#meetingname </span><span class="cmdline">scrum</span>
<a name="l-3"></a><span class="tm">13:04:07</span><span class="nk"> &lt;kimchi-bot&gt;</span> Meeting started Wed Jul 16 13:04:07 2014 UTC.  The chair is alinefm. Information about MeetBot at http://wiki.debian.org/MeetBot.
<a name="l-4"></a><span class="tm">13:04:07</span><span class="nk"> &lt;kimchi-bot&gt;</span> Useful Commands: #action #agreed #help #info #idea #link #topic.
<a name="l-5"></a><span class="tm">13:04:07</span><span class="nk"> &lt;kimchi-bot&gt;</span> The meeting name has been set to 'scrum'
<a name="l-6"></a><span class="tm">13:04:20</span><span class="nk"> &lt;alinefm&gt;</span> <span class="cmd">#info </span><span class="cmdline">Agenda 1) Status 2) Open discussion</span>
<a name="l-7"></a><span class="tm">13:04:20</span><span class="nk"> &lt;alinefm&gt;</span> anything else?
<a name="l-8"></a><span class="tm">13:04:45</span><span class="nk"> &lt;royce&gt;</span> Good for me
<a name="l-9"></a><span class="tm">13:05:07</span><span class="nk"> &lt;alinefm&gt;</span> <span class="topic">#topic </span><span class="topicline">Status</span>
<a name="l-10"></a><span class="tm">13:05:07</span><span class="nk"> &lt;alinefm&gt;</span> <span class="cmd">#info </span><span class="cmdline">Please provide your status using the #info command: #info &lt;nickname&gt; &lt;status&gt;</span>
<a name="l-11"></a><span class="tm">13:05:45</span><span class="nk"> &lt;alinefm&gt;</span> <span class="cmd">#info </span><span class="cmdline">alinefm sent patch to remove useless fonts</span>
<a name="l-12"></a><span class="tm">13:06:02</span><span class="nk"> &lt;royce&gt;</span> <span class="cmd">#info </span><span class="cmdline">royce finished template creating from image, and create vm from image based template</span>
<a name="l-13"></a><span class="tm">13:06:13</span><span class="nk"> &lt;wenwang&gt;</span> <span class="cmd">#info </span><span class="cmdline">wenwang working on Authorization: remove host/template tabs for non-root users</span>
<a name="l-14"></a><span class="tm">13:06:14</span><span class="nk"> &lt;alinefm&gt;</span> <span class="cmd">#info </span><span class="cmdline">alinefm sent patch to let front end redirect user after login</span>
<a name="l-15"></a><span class="tm">13:06:51</span><span class="nk"> &lt;alinefm&gt;</span> <span class="cmd">#info </span><span class="cmdline">alinefm sent patch with the backend authorization changes according to RFC comments</span>
<a name="l-16"></a><span class="tm">13:06:57</span><span class="nk"> &lt;wenwang&gt;</span> <span class="cmd">#info </span><span class="cmdline">wenwang  working on Authorization: remove actions menu from storage/network tabs for non-rooot users</span>
<a name="l-17"></a><span class="tm">13:07:03</span><span class="nk"> &lt;royce&gt;</span> <span class="cmd">#info </span><span class="cmdline">royce investigated libvirt feature of changing disk permission, seems it can substitute my previous patch of inotify change permission, need more test on different distro</span>
<a name="l-18"></a><span class="tm">13:07:26</span><span class="nk"> &lt;wenwang&gt;</span> <span class="cmd">#info </span><span class="cmdline">wenwang working on Authorization: remove [+] icon from non-root users view</span>
<a name="l-19"></a><span class="tm">13:07:46</span><span class="nk"> &lt;alinefm&gt;</span> <span class="cmd">#info </span><span class="cmdline">alinefm sent patch to keep KimchiException consistent independent of its use (inside of a cherrypy app or not)</span>
<a name="l-20"></a><span class="tm">13:08:05</span><span class="nk"> &lt;lagarcia&gt;</span> <span class="cmd">#info </span><span class="cmdline">lagarcia helped on the patch to build kimchi without fonts (Fedora requirement)</span>
<a name="l-21"></a><span class="tm">13:09:28</span><span class="nk"> &lt;alinefm&gt;</span> anything else?
<a name="l-22"></a><span class="tm">13:11:00</span><span class="nk"> &lt;alinefm&gt;</span> moving on...
<a name="l-23"></a><span class="tm">13:11:11</span><span class="nk"> &lt;alinefm&gt;</span> <span class="topic">#topic </span><span class="topicline">Open Discussion</span>
<a name="l-24"></a><span class="tm">13:11:26</span><span class="nk"> &lt;alinefm&gt;</span> I have some topics for today but I want to hear from you first
<a name="l-25"></a><span class="tm">13:11:33</span><span class="nk"> &lt;alinefm&gt;</span> what do you want to discuss?
<a name="l-26"></a><span class="tm">13:12:12</span><span class="nk"> &lt;wenwang&gt;</span> <span class="hi">alinefm:</span> The redirect patch has some problems
<a name="l-27"></a><span class="tm">13:12:25</span><span class="nk"> &lt;YuXin&gt;</span> <span class="cmd">#info </span><span class="cmdline">YuXin authorization: assign vm to users/groups  80% finished, will try to get a patch out this week</span>
<a name="l-28"></a><span class="tm">13:12:34</span><span class="nk"> &lt;royce&gt;</span> Authorization
<a name="l-29"></a><span class="tm">13:13:15</span><span class="nk"> &lt;wenwang&gt;</span> <span class="hi">alinefm:</span> We should not use the lastPage for the next_url which is stored in the backend
<a name="l-30"></a><span class="tm">13:13:50</span><span class="nk"> &lt;alinefm&gt;</span> wenwang, just read you review
<a name="l-31"></a><span class="tm">13:14:14</span><span class="nk"> &lt;alinefm&gt;</span> wenwang, so how I decode base64 in UI?
<a name="l-32"></a><span class="tm">13:14:32</span><span class="nk"> &lt;royce&gt;</span> About the authorization, I commented in ML, I think we get to the point to stop using Linux user/group
<a name="l-33"></a><span class="tm">13:14:38</span><span class="nk"> &lt;alinefm&gt;</span> or should we use other encode/decode base easier to work on UI?
<a name="l-34"></a><span class="tm">13:14:55</span><span class="nk"> &lt;alinefm&gt;</span> royce, just a minute and we turn to this topic
<a name="l-35"></a><span class="tm">13:15:04</span><span class="nk"> &lt;royce&gt;</span> sure
<a name="l-36"></a><span class="tm">13:16:11</span><span class="nk"> &lt;alinefm&gt;</span> wenwang, ?
<a name="l-37"></a><span class="tm">13:16:29</span><span class="nk"> &lt;wenwang&gt;</span> <span class="hi">alinefm:</span> base 64 can be decoded by using the base64.js. But what we are using is base64_urlsafe. I think I can have the file changed possibly it will work
<a name="l-38"></a><span class="tm">13:17:16</span><span class="nk"> &lt;alinefm&gt;</span> wenwang, the current base64.js file in kimchi source code is imported from novnc
<a name="l-39"></a><span class="tm">13:17:20</span><span class="nk"> &lt;alinefm&gt;</span> we should not change it
<a name="l-40"></a><span class="tm">13:17:56</span><span class="nk"> &lt;alinefm&gt;</span> wenwang, maybe use other encode rather than base64_urlsafe
<a name="l-41"></a><span class="tm">13:18:05</span><span class="nk"> &lt;alinefm&gt;</span> shaohef, any reason to use this ^?
<a name="l-42"></a><span class="tm">13:18:50</span><span class="nk"> &lt;royce&gt;</span> alinefm, shaohef had just returned from train station, he may not able to response:)
<a name="l-43"></a><span class="tm">13:19:35</span><span class="nk"> &lt;alinefm&gt;</span> royce, thanks for the info
<a name="l-44"></a><span class="tm">13:19:54</span><span class="nk"> &lt;royce&gt;</span> yw
<a name="l-45"></a><span class="tm">13:19:57</span><span class="nk"> &lt;wenwang&gt;</span> <span class="hi">alinefm:</span> okay then, maybe we can change for another way of encoding
<a name="l-46"></a><span class="tm">13:20:17</span><span class="nk"> &lt;wenwang&gt;</span> <span class="hi">alinefm:</span> like URIcomponent
<a name="l-47"></a><span class="tm">13:20:21</span><span class="nk"> &lt;alinefm&gt;</span> wenwang, what is easy to decode on UI? what is general used/
<a name="l-48"></a><span class="tm">13:20:40</span><span class="nk"> &lt;alinefm&gt;</span> wenwang, encodeURIcomponent / decodeURIcomponent ?
<a name="l-49"></a><span class="tm">13:20:40</span><span class="nk"> &lt;wenwang&gt;</span> URIcomponent
<a name="l-50"></a><span class="tm">13:20:55</span><span class="nk"> &lt;wenwang&gt;</span> <span class="hi">alinefm:</span> yes
<a name="l-51"></a><span class="tm">13:21:13</span><span class="nk"> &lt;alinefm&gt;</span> wenwang, ok - I will try it and resend the patch today fixing the problems you mentioned on review
<a name="l-52"></a><span class="tm">13:21:28</span><span class="nk"> &lt;wenwang&gt;</span> <span class="hi">alinefm:</span> That will be great
<a name="l-53"></a><span class="tm">13:21:52</span><span class="nk"> &lt;alinefm&gt;</span> wenwang, about the role/mode map, royce mentioned a good point during review
<a name="l-54"></a><span class="tm">13:21:56</span><span class="nk"> &lt;wenwang&gt;</span> <span class="hi">alinefm:</span> The frontend based on your redirect in frontend has been ready
<a name="l-55"></a><span class="tm">13:22:30</span><span class="nk"> &lt;alinefm&gt;</span> instead of adding the map to xml, we need to have a protected API for it
<a name="l-56"></a><span class="tm">13:22:42</span><span class="nk"> &lt;alinefm&gt;</span> otherwise a user can hack the js code to get other views
<a name="l-57"></a><span class="tm">13:23:03</span><span class="nk"> &lt;wenwang&gt;</span> <span class="hi">alinefm:</span> hmm, that make sense
<a name="l-58"></a><span class="tm">13:23:26</span><span class="nk"> &lt;wenwang&gt;</span> <span class="hi">alinefm:</span> So we need to create a GET method that get user's role?
<a name="l-59"></a><span class="tm">13:23:27</span><span class="nk"> &lt;alinefm&gt;</span> so I suggest adding a new API /authorization that returns the info  {tab: {role: mode, role: mode..}
<a name="l-60"></a><span class="tm">13:23:41</span><span class="nk"> &lt;alinefm&gt;</span> wenwang, for the authorization map
<a name="l-61"></a><span class="tm">13:24:04</span><span class="nk"> &lt;alinefm&gt;</span> GET /authorization
<a name="l-62"></a><span class="tm">13:24:05</span><span class="nk"> &lt;alinefm&gt;</span> {
<a name="l-63"></a><span class="tm">13:24:05</span><span class="nk"> &lt;alinefm&gt;</span> <span class="hi">"guests":</span> {"admin": "admin",
<a name="l-64"></a><span class="tm">13:24:05</span><span class="nk"> &lt;alinefm&gt;</span> <span class="hi">"user":</span> "byInstance"},
<a name="l-65"></a><span class="tm">13:24:05</span><span class="nk"> &lt;YuXin&gt;</span> who is authorized to accesss this API
<a name="l-66"></a><span class="tm">13:24:06</span><span class="nk"> &lt;alinefm&gt;</span> <span class="hi">"templates":</span> {"admin": "admin",
<a name="l-67"></a><span class="tm">13:24:07</span><span class="nk"> &lt;alinefm&gt;</span> <span class="hi">"user":</span> "byInstance"}
<a name="l-68"></a><span class="tm">13:24:11</span><span class="nk"> &lt;alinefm&gt;</span> ...
<a name="l-69"></a><span class="tm">13:24:13</span><span class="nk"> &lt;alinefm&gt;</span> }
<a name="l-70"></a><span class="tm">13:24:41</span><span class="nk"> &lt;alinefm&gt;</span> YuXin, a logged user
<a name="l-71"></a><span class="tm">13:24:56</span><span class="nk"> &lt;alinefm&gt;</span> after login you get this map to display the kimchi UI accordingly
<a name="l-72"></a><span class="tm">13:25:05</span><span class="nk"> &lt;alinefm&gt;</span> example:
<a name="l-73"></a><span class="tm">13:25:11</span><span class="nk"> &lt;YuXin&gt;</span> so all users are authorized to access this API
<a name="l-74"></a><span class="tm">13:25:15</span><span class="nk"> &lt;wenwang&gt;</span> <span class="hi">alinefm:</span> We need to build the tabs before we logged in
<a name="l-75"></a><span class="tm">13:26:11</span><span class="nk"> &lt;wenwang&gt;</span> <span class="hi">alinefm:</span> That means we need to get user's mode once clicking on the login button
<a name="l-76"></a><span class="tm">13:26:30</span><span class="nk"> &lt;YuXin&gt;</span> instead add this API, just get that xml file to be protected
<a name="l-77"></a><span class="tm">13:27:09</span><span class="nk"> &lt;YuXin&gt;</span> I mean add that xml file to protection list
<a name="l-78"></a><span class="tm">13:27:31</span><span class="nk"> &lt;royce&gt;</span> I agree, if enabled this set of API, admin can add or manage, normal users can query his own authorization
<a name="l-79"></a><span class="tm">13:28:14</span><span class="nk"> &lt;royce&gt;</span> YuXin, by xml file protection you mean?
<a name="l-80"></a><span class="tm">13:28:48</span><span class="nk"> &lt;YuXin&gt;</span> I think aline means that xml file need to be protected
<a name="l-81"></a><span class="tm">13:29:06</span><span class="nk"> &lt;alinefm&gt;</span> thinking...
<a name="l-82"></a><span class="tm">13:29:30</span><span class="nk"> &lt;YuXin&gt;</span> so only authenticated user can load it
<a name="l-83"></a><span class="tm">13:30:36</span><span class="nk"> &lt;wenwang&gt;</span> Kimchi need the xml file to load the tabs
<a name="l-84"></a><span class="tm">13:30:40</span><span class="nk"> &lt;royce&gt;</span> even an authenticated user can modify the .js I think, normal user can get admin's view
<a name="l-85"></a><span class="tm">13:31:07</span><span class="nk"> &lt;alinefm&gt;</span> royce, yes - but it also can happen with a API
<a name="l-86"></a><span class="tm">13:31:13</span><span class="nk"> &lt;royce&gt;</span> right
<a name="l-87"></a><span class="tm">13:31:21</span><span class="nk"> &lt;royce&gt;</span> wait
<a name="l-88"></a><span class="tm">13:31:48</span><span class="nk"> &lt;royce&gt;</span> alinefm, do you mean normal users can get admin view through API?
<a name="l-89"></a><span class="tm">13:32:05</span><span class="nk"> &lt;YuXin&gt;</span> without this xml, if a hacker only read js code, this can get it to build the whole UI
<a name="l-90"></a><span class="tm">13:32:10</span><span class="nk"> &lt;royce&gt;</span> I mean API need to be classified, who can call what kinds of APIs
<a name="l-91"></a><span class="tm">13:32:42</span><span class="nk"> &lt;YuXin&gt;</span> this is the side effect that we js code to build UI
<a name="l-92"></a><span class="tm">13:32:48</span><span class="nk"> &lt;royce&gt;</span> Talked with openstack guys they said openstack validate every API call with keystone to see if user are authorized to do so
<a name="l-93"></a><span class="tm">13:33:15</span><span class="nk"> &lt;alinefm&gt;</span> royce, UI will user GET /authorization to build the UI, a hacker ca modify it to ignore the /authorization response to use their own values
<a name="l-94"></a><span class="tm">13:33:17</span><span class="nk"> &lt;YuXin&gt;</span> for web2.0 style UI(rich client), this is unavoidable
<a name="l-95"></a><span class="tm">13:33:40</span><span class="nk"> &lt;royce&gt;</span> alinefm, oh, true
<a name="l-96"></a><span class="tm">13:34:12</span><span class="nk"> &lt;royce&gt;</span> so can UI try API call and then decide what to present?
<a name="l-97"></a><span class="tm">13:34:17</span><span class="nk"> &lt;YuXin&gt;</span> so strictly, we are still protecting data and function
<a name="l-98"></a><span class="tm">13:34:19</span><span class="nk"> &lt;alinefm&gt;</span> royce, YuXin, wenwang, I think we need to use the cheetah template to solve this problem
<a name="l-99"></a><span class="tm">13:34:37</span><span class="nk"> &lt;alinefm&gt;</span> so the xml will be built on backend according to roles/views
<a name="l-100"></a><span class="tm">13:35:11</span><span class="nk"> &lt;royce&gt;</span> good idea
<a name="l-101"></a><span class="tm">13:35:35</span><span class="nk"> &lt;alinefm&gt;</span> <span class="hi">example:</span> input on cheetah template #if role == admin: display + icon
<a name="l-102"></a><span class="tm">13:36:21</span><span class="nk"> &lt;YuXin&gt;</span> but in js code, it need to check all available config options
<a name="l-103"></a><span class="tm">13:36:27</span><span class="nk"> &lt;alinefm&gt;</span> http://www.cheetahtemplate.org/docs/users_guide_html_multipage/flowControl.if.html
<a name="l-104"></a><span class="tm">13:36:32</span><span class="nk"> &lt;wenwang&gt;</span> <span class="hi">alinefm:</span> That's good
<a name="l-105"></a><span class="tm">13:36:40</span><span class="nk"> &lt;YuXin&gt;</span> a hacker can read the code and mock the xml file to build all UI
<a name="l-106"></a><span class="tm">13:37:02</span><span class="nk"> &lt;alinefm&gt;</span> YuXin, using cheetah we will build the view on backend
<a name="l-107"></a><span class="tm">13:37:11</span><span class="nk"> &lt;royce&gt;</span> a hacker can just get html of his own role
<a name="l-108"></a><span class="tm">13:37:15</span><span class="nk"> &lt;alinefm&gt;</span> the JS will need to only care about the "byInstance" view
<a name="l-109"></a><span class="tm">13:37:38</span><span class="nk"> &lt;wenwang&gt;</span> so what we get back is role right?
<a name="l-110"></a><span class="tm">13:37:52</span><span class="nk"> &lt;YuXin&gt;</span> aline, current, the js code is loading the xml file and build the UI at cllient side
<a name="l-111"></a><span class="tm">13:38:03</span><span class="nk"> &lt;YuXin&gt;</span> what you are talking about will be quite a big change
<a name="l-112"></a><span class="tm">13:39:51</span><span class="nk"> &lt;alinefm&gt;</span> from backend perspective, while send HTML as response we will need to send the authorization map as well and in the templates we add the IFs/ELSEs to display/hide content according to user role
<a name="l-113"></a><span class="tm">13:40:00</span><span class="nk"> &lt;alinefm&gt;</span> we UI will keep the same
<a name="l-114"></a><span class="tm">13:40:10</span><span class="nk"> &lt;alinefm&gt;</span> unless while loading the VMs
<a name="l-115"></a><span class="tm">13:40:24</span><span class="nk"> &lt;royce&gt;</span> alinefm, I think the view is one thing, protect API from backend is still needed, so that even if they call this API from like curl, the API call fails
<a name="l-116"></a><span class="tm">13:40:45</span><span class="nk"> &lt;alinefm&gt;</span> royce, which API/
<a name="l-117"></a><span class="tm">13:40:55</span><span class="nk"> &lt;royce&gt;</span> All REST API
<a name="l-118"></a><span class="tm">13:41:05</span><span class="nk"> &lt;alinefm&gt;</span> royce, it is already protected
<a name="l-119"></a><span class="tm">13:41:26</span><span class="nk"> &lt;alinefm&gt;</span> only admin user (ie, with sudo permission) can manage kimchi
<a name="l-120"></a><span class="tm">13:41:54</span><span class="nk"> &lt;royce&gt;</span> yeah, I know, that is the next issue I listed
<a name="l-121"></a><span class="tm">13:42:14</span><span class="nk"> &lt;alinefm&gt;</span> wenwang, YuXin, get a deal about the cheetah template?
<a name="l-122"></a><span class="tm">13:42:24</span><span class="nk"> &lt;royce&gt;</span> Because it's wired up with super user
<a name="l-123"></a><span class="tm">13:42:41</span><span class="nk"> &lt;royce&gt;</span> We cannot control each API in your role model
<a name="l-124"></a><span class="tm">13:43:22</span><span class="nk"> &lt;alinefm&gt;</span> royce, yeap! I know! but for now we will not allow change user role
<a name="l-125"></a><span class="tm">13:43:23</span><span class="nk"> &lt;YuXin&gt;</span> aline, do you mean when return kimchi-ui.html, the tabs are already in and based on the role to determine which tab is included
<a name="l-126"></a><span class="tm">13:43:28</span><span class="nk"> &lt;alinefm&gt;</span> we will add it in future
<a name="l-127"></a><span class="tm">13:43:52</span><span class="nk"> &lt;alinefm&gt;</span> YuXin, forgot that point! heheh
<a name="l-128"></a><span class="tm">13:44:02</span><span class="nk"> &lt;alinefm&gt;</span> YuXin, I was only thinking about the elements in the tab
<a name="l-129"></a><span class="tm">13:44:44</span><span class="nk"> &lt;YuXin&gt;</span> so aline, you are trying to protect actions, right?
<a name="l-130"></a><span class="tm">13:45:31</span><span class="nk"> &lt;alinefm&gt;</span> YuXin, I though in load the correct html based on role on backend but I forgot some tabs will not be displayed
<a name="l-131"></a><span class="tm">13:45:47</span><span class="nk"> &lt;alinefm&gt;</span> *thought
<a name="l-132"></a><span class="tm">13:46:51</span><span class="nk"> &lt;alinefm&gt;</span> royce, YuXin, wenwang, I think we can keep it as we are doing with the tabs.xml
<a name="l-133"></a><span class="tm">13:46:54</span><span class="nk"> &lt;royce&gt;</span> I mean, if we protected the API with fine grained, we do not worry about user hack js.  Like it is {vm: admin, storage: user} if he hacks to be :{vm:admin, storage:admin}, the "+" button is there but click it will fail
<a name="l-134"></a><span class="tm">13:47:16</span><span class="nk"> &lt;alinefm&gt;</span> as we are protecting the API on backend - if the user hack the UI he/she will not be able to perform actions not allowed to him/her
<a name="l-135"></a><span class="tm">13:47:26</span><span class="nk"> &lt;royce&gt;</span> true
<a name="l-136"></a><span class="tm">13:47:28</span><span class="nk"> &lt;YuXin&gt;</span> correct
<a name="l-137"></a><span class="tm">13:47:38</span><span class="nk"> &lt;wenwang&gt;</span> yes
<a name="l-138"></a><span class="tm">13:47:43</span><span class="nk"> &lt;YuXin&gt;</span> api access need to be role based as well
<a name="l-139"></a><span class="tm">13:48:26</span><span class="nk"> &lt;royce&gt;</span> Yes, so point is we cannot count on UI to implement authorization
<a name="l-140"></a><span class="tm">13:48:38</span><span class="nk"> &lt;alinefm&gt;</span> yeap
<a name="l-141"></a><span class="tm">13:48:52</span><span class="nk"> &lt;alinefm&gt;</span> great! I will apply the comments made by change and resend the patches using tabs.xml
<a name="l-142"></a><span class="tm">13:49:03</span><span class="nk"> &lt;wenwang&gt;</span> <span class="hi">royce:</span> That's correct
<a name="l-143"></a><span class="tm">13:49:19</span><span class="nk"> &lt;alinefm&gt;</span> can we move on to other authorization topic?
<a name="l-144"></a><span class="tm">13:49:26</span><span class="nk"> &lt;wenwang&gt;</span> <span class="hi">alinefm:</span> That will be great
<a name="l-145"></a><span class="tm">13:49:47</span><span class="nk"> &lt;royce&gt;</span> sure
<a name="l-146"></a><span class="tm">13:49:48</span><span class="nk"> &lt;alinefm&gt;</span> royce, go ahead
<a name="l-147"></a><span class="tm">13:50:33</span><span class="nk"> &lt;royce&gt;</span> I have no more major questions now, other small ones are in ML
<a name="l-148"></a><span class="tm">13:51:20</span><span class="nk"> &lt;alinefm&gt;</span> royce, ok - so let me clarify some doubts I think you have =)
<a name="l-149"></a><span class="tm">13:51:57</span><span class="nk"> &lt;alinefm&gt;</span> we will have a role per tab - as described in my last patchset {guests: admin, templates: admin, ...}
<a name="l-150"></a><span class="tm">13:52:23</span><span class="nk"> &lt;alinefm&gt;</span> *by now* the role is set according to sudo permissions
<a name="l-151"></a><span class="tm">13:52:45</span><span class="nk"> &lt;alinefm&gt;</span> so if a user has sudo permission his/her role will be admin for all tabs
<a name="l-152"></a><span class="tm">13:53:04</span><span class="nk"> &lt;wenwang&gt;</span> yes
<a name="l-153"></a><span class="tm">13:53:06</span><span class="nk"> &lt;alinefm&gt;</span> so if a user does NOT have sudo permission his/her role will be "user" for all tabs
<a name="l-154"></a><span class="tm">13:53:22</span><span class="nk"> &lt;alinefm&gt;</span> in future, we will allow changing a user role
<a name="l-155"></a><span class="tm">13:53:34</span><span class="nk"> &lt;royce&gt;</span> yes
<a name="l-156"></a><span class="tm">13:53:38</span><span class="nk"> &lt;alinefm&gt;</span> so we can have a mix of all combinations
<a name="l-157"></a><span class="tm">13:53:50</span><span class="nk"> &lt;wenwang&gt;</span> I think to each tab, what matters is really the "mode"
<a name="l-158"></a><span class="tm">13:54:14</span><span class="nk"> &lt;alinefm&gt;</span> wenwang, yeap! the map role -&gt; mode
<a name="l-159"></a><span class="tm">13:54:14</span><span class="nk"> &lt;wenwang&gt;</span> How about just add "mode" to each tab
<a name="l-160"></a><span class="tm">13:54:16</span><span class="nk"> &lt;royce&gt;</span> So what needs to update is  we still need to use tabs.xml to protect corresponding API in backend
<a name="l-161"></a><span class="tm">13:54:22</span><span class="nk"> &lt;alinefm&gt;</span> we still need to take in mind the plugins we support
<a name="l-162"></a><span class="tm">13:55:19</span><span class="nk"> &lt;alinefm&gt;</span> royce, nope! the API is protected by @UrlSubNode() on control
<a name="l-163"></a><span class="tm">13:55:27</span><span class="nk"> &lt;alinefm&gt;</span> <span class="hi">example:</span> @UrlSubNode("vms", True, ['POST', 'PUT', 'DELETE'])
<a name="l-164"></a><span class="tm">13:55:48</span><span class="nk"> &lt;YuXin&gt;</span> royce, tabs.xml is used for client to build UI based on role
<a name="l-165"></a><span class="tm">13:55:49</span><span class="nk"> &lt;alinefm&gt;</span> there you are telling only "admin" role can do POST, PUT, DELETE to a VM
<a name="l-166"></a><span class="tm">13:56:09</span><span class="nk"> &lt;YuXin&gt;</span> do not  mix it with api protection
<a name="l-167"></a><span class="tm">13:56:43</span><span class="nk"> &lt;royce&gt;</span> checking
<a name="l-168"></a><span class="tm">13:57:40</span><span class="nk"> &lt;wenwang&gt;</span> <span class="hi">alinefm:</span> So what are included in the xml now? role and mode or just role
<a name="l-169"></a><span class="tm">13:58:05</span><span class="nk"> &lt;alinefm&gt;</span> wenwang, both
<a name="l-170"></a><span class="tm">13:58:13</span><span class="nk"> &lt;alinefm&gt;</span> &lt;access role=admin mode=admin/&gt;
<a name="l-171"></a><span class="tm">13:58:21</span><span class="nk"> &lt;alinefm&gt;</span> &lt;access role=suer mode=none/&gt;
<a name="l-172"></a><span class="tm">13:58:24</span><span class="nk"> &lt;alinefm&gt;</span> *user
<a name="l-173"></a><span class="tm">13:58:49</span><span class="nk"> &lt;wenwang&gt;</span> Okay, I see
<a name="l-174"></a><span class="tm">13:59:03</span><span class="nk"> &lt;wenwang&gt;</span> As what I see today in the ML
<a name="l-175"></a><span class="tm">13:59:16</span><span class="nk"> &lt;alinefm&gt;</span> wenwang, the /login will return the map for each tab so while loading the tab you need to get the correct access element according to user user for this tab
<a name="l-176"></a><span class="tm">13:59:33</span><span class="nk"> &lt;alinefm&gt;</span> and then get the mode value
<a name="l-177"></a><span class="tm">13:59:40</span><span class="nk"> &lt;alinefm&gt;</span> wenwang, does that make sense?
<a name="l-178"></a><span class="tm">13:59:54</span><span class="nk"> &lt;royce&gt;</span> I see...still as I mentioned as Guest may have multiple level rather than just admin or none
<a name="l-179"></a><span class="tm">14:00:14</span><span class="nk"> &lt;wenwang&gt;</span> <span class="hi">alinefm:</span> ACK
<a name="l-180"></a><span class="tm">14:00:15</span><span class="nk"> &lt;royce&gt;</span> some can CREATE/DELETE, some can start/stop, some can just view
<a name="l-181"></a><span class="tm">14:00:51</span><span class="nk"> &lt;YuXin&gt;</span> for vm, root: full, admin: no add, user: start/stop/vnc
<a name="l-182"></a><span class="tm">14:00:58</span><span class="nk"> &lt;royce&gt;</span> Seems UrlSubNode does not cover such scenario
<a name="l-183"></a><span class="tm">14:01:23</span><span class="nk"> &lt;royce&gt;</span> YuXin, think about a phisical machine admin--he can start and stop
<a name="l-184"></a><span class="tm">14:01:31</span><span class="nk"> &lt;royce&gt;</span> users can just login
<a name="l-185"></a><span class="tm">14:02:07</span><span class="nk"> &lt;royce&gt;</span> virtualization admin can create and delete/ vm admin can start and stop/users login
<a name="l-186"></a><span class="tm">14:02:18</span><span class="nk"> &lt;YuXin&gt;</span> that is our designed security model, Adam told that he has verified with vCell administrator
<a name="l-187"></a><span class="tm">14:03:28</span><span class="nk"> &lt;alinefm&gt;</span> royce, the backend covers what we have now = 2 roles: admin - full access, user - limited access
<a name="l-188"></a><span class="tm">14:03:40</span><span class="nk"> &lt;YuXin&gt;</span> royce, please make clear whether you have questions about security model design or implementation?
<a name="l-189"></a><span class="tm">14:03:54</span><span class="nk"> &lt;alinefm&gt;</span> royce, I agree with you we will need to do more changes in backend when we add more authorization levels as you described
<a name="l-190"></a><span class="tm">14:04:06</span><span class="nk"> &lt;royce&gt;</span> I'm talking about the design YuXin
<a name="l-191"></a><span class="tm">14:04:41</span><span class="nk"> &lt;royce&gt;</span> All or nothing does not sounds reasonable in cloud envirnonment
<a name="l-192"></a><span class="tm">14:04:56</span><span class="nk"> &lt;YuXin&gt;</span> if you have question about design, that is next sprint's topic I think, for this sprint, we need to get the current design implemented
<a name="l-193"></a><span class="tm">14:05:01</span><span class="nk"> &lt;alinefm&gt;</span> royce, for example to solve the problem you mention, we will need to get the right methods according to roles
<a name="l-194"></a><span class="tm">14:05:33</span><span class="nk"> &lt;alinefm&gt;</span> royce, we dont build a house in one day - it is step by step =)
<a name="l-195"></a><span class="tm">14:05:40</span><span class="nk"> &lt;alinefm&gt;</span> it is what we are doing
<a name="l-196"></a><span class="tm">14:05:41</span><span class="nk"> &lt;royce&gt;</span> yes, sure
<a name="l-197"></a><span class="tm">14:06:14</span><span class="nk"> &lt;royce&gt;</span> YuXin, I don't think a feature can implemented right with wrong design:)
<a name="l-198"></a><span class="tm">14:06:57</span><span class="nk"> &lt;alinefm&gt;</span> royce, what do you think it is wrong based on our 2 roles (admin/user) ?
<a name="l-199"></a><span class="tm">14:07:06</span><span class="nk"> &lt;YuXin&gt;</span> the design has been poped up long ago, it is late now you question about that as it is already at coding phase
<a name="l-200"></a><span class="tm">14:07:21</span><span class="nk"> &lt;wenwang&gt;</span> <span class="hi">alinefm:</span> so now we don't have users that is distinguished as "admin" and "user" right? If so, shall we give the user in this spint the right without admin's power?
<a name="l-201"></a><span class="tm">14:08:02</span><span class="nk"> &lt;royce&gt;</span> alinefm, I'm OK with current one but still we can try to change it to fine grained model in the future, I agree with you~
<a name="l-202"></a><span class="tm">14:08:52</span><span class="nk"> &lt;YuXin&gt;</span> in this sprint, if a user is assigned to a vm, the user will have full access to the vm
<a name="l-203"></a><span class="tm">14:09:00</span><span class="nk"> &lt;alinefm&gt;</span> wenwang, ^
<a name="l-204"></a><span class="tm">14:09:06</span><span class="nk"> &lt;YuXin&gt;</span> this has no conflict to royce's opinion
<a name="l-205"></a><span class="tm">14:09:21</span><span class="nk"> &lt;alinefm&gt;</span> wenwang, YuXin, in my last patch I added a "access" parameter to the VM
<a name="l-206"></a><span class="tm">14:09:39</span><span class="nk"> &lt;alinefm&gt;</span> so we can change it when adding more role levels
<a name="l-207"></a><span class="tm">14:09:48</span><span class="nk"> &lt;alinefm&gt;</span> for now the access=full for all vms
<a name="l-208"></a><span class="tm">14:09:49</span><span class="nk"> &lt;royce&gt;</span> sure
<a name="l-209"></a><span class="tm">14:09:55</span><span class="nk"> &lt;YuXin&gt;</span> so royce, please re-think your design, and get an rfc out before next sprint, it is still not late
<a name="l-210"></a><span class="tm">14:10:00</span><span class="nk"> &lt;wenwang&gt;</span> <span class="hi">alinefm:</span> that will be nice
<a name="l-211"></a><span class="tm">14:10:23</span><span class="nk"> &lt;wenwang&gt;</span> <span class="hi">YuXin:</span> I see. Full access for user this sprint
<a name="l-212"></a><span class="tm">14:11:17</span><span class="nk"> &lt;alinefm&gt;</span> wenwang, YuXin, so when the mode=byInstance check the "access" parameter to each resource
<a name="l-213"></a><span class="tm">14:11:29</span><span class="nk"> &lt;YuXin&gt;</span> yes
<a name="l-214"></a><span class="tm">14:11:43</span><span class="nk"> &lt;alinefm&gt;</span> in the current sprint we have guests tabs with &lt;access role=user mode=byInstance&gt;
<a name="l-215"></a><span class="tm">14:12:02</span><span class="nk"> &lt;royce&gt;</span> Oh, one more word about two other things, alinefm
<a name="l-216"></a><span class="tm">14:12:07</span><span class="nk"> &lt;alinefm&gt;</span> so while loading the guests you need to check the "access" parameter (now always set to "full")
<a name="l-217"></a><span class="tm">14:12:17</span><span class="nk"> &lt;alinefm&gt;</span> royce, sure
<a name="l-218"></a><span class="tm">14:12:45</span><span class="nk"> &lt;royce&gt;</span> one is about the upload
<a name="l-219"></a><span class="tm">14:12:52</span><span class="nk"> &lt;wenwang&gt;</span> <span class="hi">alinefm:</span> ACK
<a name="l-220"></a><span class="tm">14:13:21</span><span class="nk"> &lt;royce&gt;</span> seem ssdxiao haven't taken it, do you mind I pick up the backend and hongliang the UI?
<a name="l-221"></a><span class="tm">14:13:51</span><span class="nk"> &lt;YuXin&gt;</span> royce, which item do you mean?
<a name="l-222"></a><span class="tm">14:14:07</span><span class="nk"> &lt;royce&gt;</span> upload a iso to ootb pool
<a name="l-223"></a><span class="tm">14:14:08</span><span class="nk"> &lt;alinefm&gt;</span> royce, I am completely fine with that! just send a email do ssdxiao first to avoid conflicts
<a name="l-224"></a><span class="tm">14:14:34</span><span class="nk"> &lt;alinefm&gt;</span> royce, but I will target it to sprint 2, OK?
<a name="l-225"></a><span class="tm">14:14:55</span><span class="nk"> &lt;YuXin&gt;</span> i believe in wiki, it is already under hongliang's name for the UI part
<a name="l-226"></a><span class="tm">14:15:08</span><span class="nk"> &lt;royce&gt;</span> I think sprint 1 is OK, alinefm:)
<a name="l-227"></a><span class="tm">14:15:23</span><span class="nk"> &lt;alinefm&gt;</span> royce, sprint 1 ends next week, right?
<a name="l-228"></a><span class="tm">14:16:00</span><span class="nk"> &lt;YuXin&gt;</span> yes, 07/23 if i remember correctly
<a name="l-229"></a><span class="tm">14:16:06</span><span class="nk"> &lt;royce&gt;</span> I think I can try to make it
<a name="l-230"></a><span class="tm">14:16:17</span><span class="nk"> &lt;royce&gt;</span> because another item of mine, the inotify one
<a name="l-231"></a><span class="tm">14:16:31</span><span class="nk"> &lt;royce&gt;</span> seems not requeire so much effort now
<a name="l-232"></a><span class="tm">14:16:35</span><span class="nk"> &lt;alinefm&gt;</span> YuXin, yeap! 07/23
<a name="l-233"></a><span class="tm">14:16:41</span><span class="nk"> &lt;shaohef&gt;</span> <span class="hi">alinefm:</span>  wenwang：   The alphabet base64_urlsafe uses '-' instead of '+' and '_' instead of '/'.
<a name="l-234"></a><span class="tm">14:16:59</span><span class="nk"> &lt;royce&gt;</span> as I mentioned libvirt has a configuration which will automatically modify disk permission
<a name="l-235"></a><span class="tm">14:17:03</span><span class="nk"> &lt;alinefm&gt;</span> royce, let's target it for sprint 2 and if you get it done earlier you can send the patches to ML =)
<a name="l-236"></a><span class="tm">14:17:11</span><span class="nk"> &lt;royce&gt;</span> ok, thanks alinefm
<a name="l-237"></a><span class="tm">14:17:21</span><span class="nk"> &lt;wenwang&gt;</span> <span class="hi">shaohef:</span> That's correct
<a name="l-238"></a><span class="tm">14:17:31</span><span class="nk"> &lt;shaohef&gt;</span> <span class="hi">alinefm:</span>  wenwang: '+' and '/' are a special characters in url
<a name="l-239"></a><span class="tm">14:18:01</span><span class="nk"> &lt;alinefm&gt;</span> shaohef, thanks! wenwang suggested to use URIcomponent instead of base64
<a name="l-240"></a><span class="tm">14:18:10</span><span class="nk"> &lt;alinefm&gt;</span> as it is easier to decode on UI
<a name="l-241"></a><span class="tm">14:18:17</span><span class="nk"> &lt;shaohef&gt;</span> <span class="hi">alinefm:</span>  I 哈ve
<a name="l-242"></a><span class="tm">14:18:50</span><span class="nk"> &lt;shaohef&gt;</span> <span class="hi">alinefm:</span>  I remembered I have tried URIcomponent,  seems it can not works
<a name="l-243"></a><span class="tm">14:19:28</span><span class="nk"> &lt;alinefm&gt;</span> shaohef, hmm or try base64 (without urlsafe) + URIcomponent
<a name="l-244"></a><span class="tm">14:20:00</span><span class="nk"> &lt;shaohef&gt;</span> <span class="hi">alinefm:</span>  I have not try this method.
<a name="l-245"></a><span class="tm">14:20:13</span><span class="nk"> &lt;shaohef&gt;</span> <span class="hi">alinefm:</span>  maybe it can also works.
<a name="l-246"></a><span class="tm">14:20:23</span><span class="nk"> &lt;YuXin&gt;</span> if backend do URIEncoding is different from URIComponentEncoding
<a name="l-247"></a><span class="tm">14:20:36</span><span class="nk"> &lt;alinefm&gt;</span> shaohef, I will do some investigation on it today
<a name="l-248"></a><span class="tm">14:20:45</span><span class="nk"> &lt;YuXin&gt;</span> for this case, it should be URIEncoding
<a name="l-249"></a><span class="tm">14:21:15</span><span class="nk"> &lt;shaohef&gt;</span> <span class="hi">alinefm:</span> that's great.
<a name="l-250"></a><span class="tm">14:21:20</span><span class="nk"> &lt;alinefm&gt;</span> YuXin, I will try it too
<a name="l-251"></a><span class="tm">14:21:29</span><span class="nk"> &lt;alinefm&gt;</span> team, seems we are over time
<a name="l-252"></a><span class="tm">14:21:42</span><span class="nk"> &lt;YuXin&gt;</span> http://www.w3schools.com/jsref/jsref_obj_global.asp
<a name="l-253"></a><span class="tm">14:22:15</span><span class="nk"> &lt;alinefm&gt;</span> thanks
<a name="l-254"></a><span class="tm">14:22:40</span><span class="nk"> &lt;alinefm&gt;</span> I will finish the scrum meeting but if you have more topics we can continue the discussion
<a name="l-255"></a><span class="tm">14:23:01</span><span class="nk"> &lt;alinefm&gt;</span> thanks all for the great discussions!
<a name="l-256"></a><span class="tm">14:23:05</span><span class="nk"> &lt;alinefm&gt;</span> <span class="cmd">#endmeeting</span><span class="cmdline"></span></pre>
</body></html>
